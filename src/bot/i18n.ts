// src/bot/i18n.ts
import { BotContext } from './bot.context';

export const i18n = (ctx: BotContext, key: string, params: Record<string, any> = {}) => {
  const language = ctx.session.language || 'uz';
  const translations: Record<string, Record<string, string>> = {
    uz: {
      welcome: 'Xush kelibsiz! Quyidagi buyruqlarni ishlatishingiz mumkin: {commands}',
      error: 'Xatolik yuz berdi. Iltimos, qayta urinib koÊ»ring.',
      not_registered: 'Siz roÊ»yxatdan oÊ»tmagansiz. Iltimos, /register buyrugÊ»ini ishlatib roÊ»yxatdan oÊ»ting.',
      not_seller: 'Siz sotuvchi sifatida roÊ»yxatdan oÊ»tmagansiz. Iltimos, /registerseller buyrugÊ»ini ishlatib roÊ»yxatdan oÊ»ting.',
      share_location: 'Joylashuvingizni yuboring.',
      share_location_button: 'Joylashuvni yuborish',
      no_stores_found: 'Yaqin atrofda doÊ»konlar topilmadi.',
      select_store: 'DoÊ»konni tanlang:\n{sellerList}',
      select_product: 'Mahsulotni tanlang:\n{productList}',
      invalid_selection: 'NotoÊ»gÊ»ri tanlov. Iltimos, raqamni kiriting.',
      no_products_found: 'Bu doÊ»konda mahsulotlar yoÊ»q.',
      booking_success: 'Buyurtma muvaffaqiyatli amalga oshirildi! Kod: {code}',
      booking_failed: 'Buyurtma amalga oshmadi. Iltimos, qayta urinib koÊ»ring.',
      booking_limit_exceeded: 'Buyurtmalar soni chegarasidan oshib ketdi. Iltimos, keyinroq urinib koÊ»ring.',
      select_language: 'Tilni tanlang:',
      language_set: '{language} tili oÊ»rnatildi.',
      user_full_name: 'ToÊ»liq ismingizni kiriting:',
      user_phone: 'Telefon raqamingizni kiriting:',
      user_payment_method: 'ToÊ»lov usulini tanlang: Naqd yoki Karta?',
      invalid_payment_method: 'NotoÊ»gÊ»ri toÊ»lov usuli. Iltimos, "Naqd" yoki "Karta" deb yozing.',
      user_registration_failed: 'RoÊ»yxatdan oÊ»tish muvaffaqiyatsiz boÊ»ldi: MaÊ¼lumotlar yetishmayapti.',
      user_registration_success: 'âœ… RoÊ»yxatdan oÊ»tish muvaffaqiyatli!\n\nðŸ‘¤ Ism: {fullName}\nðŸ“ž Telefon: {phone}\nðŸ’³ ToÊ»lov: {paymentMethod}',
      seller_full_name: 'ToÊ»liq ismingizni kiriting:',
      seller_phone: 'Telefon raqamingizni kiriting:',
      seller_business_type: 'Biznes turini kiriting (Kafe, DoÊ»kon, Restoran):',
      invalid_business_type: 'NotoÊ»gÊ»ri biznes turi. Iltimos, Kafe, DoÊ»kon yoki Restoran deb yozing.',
      seller_registration_failed: 'Sotuvchi sifatida roÊ»yxatdan oÊ»tish muvaffaqiyatsiz boÊ»ldi: MaÊ¼lumotlar yetishmayapti.',
      seller_registration_success: 'âœ… Sotuvchi sifatida roÊ»yxatdan oÊ»tish muvaffaqiyatli!',
      product_name: 'Mahsulot nomini kiriting:',
      product_price: 'Mahsulot narxini kiriting:',
      product_discount_price: 'Chegirma narxini kiriting (yoki "none" deb yozing):',
      invalid_price: 'NotoÊ»gÊ»ri narx. Iltimos, haqiqiy raqam kiriting.',
      invalid_discount_price: 'NotoÊ»gÊ»ri chegirma narxi. Iltimos, haqiqiy raqam yoki "none" deb yozing.',
      product_list_failed: 'Mahsulotni roÊ»yxatga qoÊ»shish muvaffaqiyatsiz boÊ»ldi: MaÊ¼lumotlar yetishmayapti.',
      product_listed_success: 'âœ… Mahsulot muvaffaqiyatli roÊ»yxatga qoÊ»shildi!',
    },
    ru: {
      welcome: 'Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ! Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹: {commands}',
      error: 'ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ½Ð¾Ð²Ð°.',
      not_registered: 'Ð’Ñ‹ Ð½Ðµ Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚ÐµÑÑŒ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ /register.',
      not_seller: 'Ð’Ñ‹ Ð½Ðµ Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ ÐºÐ°Ðº Ð¿Ñ€Ð¾Ð´Ð°Ð²ÐµÑ†. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚ÐµÑÑŒ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ /registerseller.',
      share_location: 'ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð²Ð°ÑˆÐµ Ð¼ÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ.',
      share_location_button: 'ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¼ÐµÑÑ‚Ð¾Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ',
      no_stores_found: 'ÐœÐ°Ð³Ð°Ð·Ð¸Ð½Ñ‹ Ð¿Ð¾Ð±Ð»Ð¸Ð·Ð¾ÑÑ‚Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹.',
      select_store: 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½:\n{sellerList}',
      select_product: 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚:\n{productList}',
      invalid_selection: 'ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€.',
      no_products_found: 'Ð’ ÑÑ‚Ð¾Ð¼ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ðµ Ð½ÐµÑ‚ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¾Ð².',
      booking_success: 'Ð—Ð°ÐºÐ°Ð· ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½! ÐšÐ¾Ð´: {code}',
      booking_failed: 'ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ½Ð¾Ð²Ð°.',
      booking_limit_exceeded: 'ÐŸÑ€ÐµÐ²Ñ‹ÑˆÐµÐ½ Ð»Ð¸Ð¼Ð¸Ñ‚ Ð·Ð°ÐºÐ°Ð·Ð¾Ð². ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.',
      select_language: 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ·Ñ‹Ðº:',
      language_set: 'Ð¯Ð·Ñ‹Ðº ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½: {language}',
      user_full_name: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¿Ð¾Ð»Ð½Ð¾Ðµ Ð¸Ð¼Ñ:',
      user_phone: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:',
      user_payment_method: 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹: ÐÐ°Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ Ð¸Ð»Ð¸ ÐšÐ°Ñ€Ñ‚Ð°?',
      invalid_payment_method: 'ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ "ÐÐ°Ð»Ð¸Ñ‡Ð½Ñ‹Ðµ" Ð¸Ð»Ð¸ "ÐšÐ°Ñ€Ñ‚Ð°".',
      user_registration_failed: 'Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ðµ ÑƒÐ´Ð°Ð»Ð°ÑÑŒ: Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ….',
      user_registration_success: 'âœ… Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!\n\nðŸ‘¤ Ð˜Ð¼Ñ: {fullName}\nðŸ“ž Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½: {phone}\nðŸ’³ ÐžÐ¿Ð»Ð°Ñ‚Ð°: {paymentMethod}',
      seller_full_name: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐµ Ð¿Ð¾Ð»Ð½Ð¾Ðµ Ð¸Ð¼Ñ:',
      seller_phone: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:',
      seller_business_type: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ð±Ð¸Ð·Ð½ÐµÑÐ° (ÐšÐ°Ñ„Ðµ, ÐœÐ°Ð³Ð°Ð·Ð¸Ð½, Ð ÐµÑÑ‚Ð¾Ñ€Ð°Ð½):',
      invalid_business_type: 'ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ð±Ð¸Ð·Ð½ÐµÑÐ°. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐšÐ°Ñ„Ðµ, ÐœÐ°Ð³Ð°Ð·Ð¸Ð½ Ð¸Ð»Ð¸ Ð ÐµÑÑ‚Ð¾Ñ€Ð°Ð½.',
      seller_registration_failed: 'Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð´Ð°Ð²Ñ†Ð° Ð½Ðµ ÑƒÐ´Ð°Ð»Ð°ÑÑŒ: Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ….',
      seller_registration_success: 'âœ… Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð´Ð°Ð²Ñ†Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!',
      product_name: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°:',
      product_price: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†ÐµÐ½Ñƒ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°:',
      product_discount_price: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†ÐµÐ½Ñƒ ÑÐ¾ ÑÐºÐ¸Ð´ÐºÐ¾Ð¹ (Ð¸Ð»Ð¸ "none" Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°):',
      invalid_price: 'ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ Ñ†ÐµÐ½Ð°. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾.',
      invalid_discount_price: 'ÐÐµÐ²ÐµÑ€Ð½Ð°Ñ Ñ†ÐµÐ½Ð° ÑÐ¾ ÑÐºÐ¸Ð´ÐºÐ¾Ð¹. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ Ð¸Ð»Ð¸ "none".',
      product_list_failed: 'ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚: Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð´Ð°Ð½Ð½Ñ‹Ñ….',
      product_listed_success: 'âœ… ÐŸÑ€Ð¾Ð´ÑƒÐºÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² ÑÐ¿Ð¸ÑÐ¾Ðº!',
    },
  };

  let message = translations[language][key] || key;
  Object.keys(params).forEach((param) => {
    message = message.replace(`{${param}}`, params[param]);
  });
  return message;
};